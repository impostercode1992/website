<!DOCTYPE html>
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<meta name="description" content="Proven methods to make money online, including freelance work, affiliate marketing, digital products, and remote jobs." />
		<title>NORSATS SYSTEMS</title>
		<link rel="canonical" href="https://norsats.my" />
		<!-- Favicon -->
		<link href="images/favicon.png" rel="icon">
		<link rel="stylesheet" href="assets/css/main.css" />
		<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
	</head>
<body>
		<!-- Five -->
		
			<section id="five" class="main style1">
				<div class="container">
					<header class="major special">
						<h2>Elements</h2>
					</header>

					<section>
						<h4>Text</h4>
						<p>This is <b>bold</b> and this is <strong>strong</strong>. This is <i>italic</i> and this is <em>emphasized</em>.
						This is <sup>superscript</sup> text and this is <sub>subscript</sub> text.
						This is <u>underlined</u> and this is code: <code>for (;;) { ... }</code>. Finally, <a href="#">this is a link</a>.</p>
						<hr />
						<header>
							<h4>Heading with a Subtitle</h4>
							<p>Lorem ipsum dolor sit amet nullam id egestas urna aliquam</p>
						</header>
						<p>Nunc lacinia ante nunc ac lobortis. Interdum adipiscing gravida odio porttitor sem non mi integer non faucibus ornare mi ut ante amet placerat aliquet. Volutpat eu sed ante lacinia sapien lorem accumsan varius montes viverra nibh in adipiscing blandit tempus accumsan.</p>
						<header>
							<h5>Heading with a Subtitle</h5>
							<p>Lorem ipsum dolor sit amet nullam id egestas urna aliquam</p>
						</header>
						<p>Nunc lacinia ante nunc ac lobortis. Interdum adipiscing gravida odio porttitor sem non mi integer non faucibus ornare mi ut ante amet placerat aliquet. Volutpat eu sed ante lacinia sapien lorem accumsan varius montes viverra nibh in adipiscing blandit tempus accumsan.</p>
						<hr />
						<h1>Heading Level 1</h1>
						<h2>Heading Level 2</h2>
						<h3>Heading Level 3</h3>
						<h4>Heading Level 4</h4>
						<h5>Heading Level 5</h5>
						<h6>Heading Level 6</h6>
						<hr />
						<h5>Blockquote</h5>
						<blockquote>Fringilla nisl. Donec accumsan interdum nisi, quis tincidunt felis sagittis eget tempus euismod. Vestibulum ante ipsum primis in faucibus vestibulum. Blandit adipiscing eu felis iaculis volutpat ac adipiscing accumsan faucibus. Vestibulum ante ipsum primis in faucibus lorem ipsum dolor sit amet nullam adipiscing eu felis.</blockquote>
						<h5>Preformatted</h5>
						<pre><code>i = 0;

while (!deck.isInOrder()) {
print 'Iteration ' + i;
deck.shuffle();
i++;
}

print 'It took ' + i + ' iterations to sort the deck.';</code></pre>
					</section>

					<section>
						<h4>Lists</h4>
						<div class="row">
							<div class="col-6 col-12-medium">
								<h5>Unordered</h5>
								<ul>
									<li>Dolor pulvinar etiam.</li>
									<li>Sagittis adipiscing.</li>
									<li>Felis enim feugiat.</li>
								</ul>
								<h5>Alternate</h5>
								<ul class="alt">
									<li>Dolor pulvinar etiam.</li>
									<li>Sagittis adipiscing.</li>
									<li>Felis enim feugiat.</li>
								</ul>
							</div>
							<div class="col-6 col-12-medium">
								<h5>Ordered</h5>
								<ol>
									<li>Dolor pulvinar etiam.</li>
									<li>Etiam vel felis viverra.</li>
									<li>Felis enim feugiat.</li>
									<li>Dolor pulvinar etiam.</li>
									<li>Etiam vel felis lorem.</li>
									<li>Felis enim et feugiat.</li>
								</ol>
								<h5>Icons</h5>
								<ul class="icons">
									<li><a href="#" class="icon brands fa-twitter"><span class="label">Twitter</span></a></li>
									<li><a href="#" class="icon brands fa-facebook-f"><span class="label">Facebook</span></a></li>
									<li><a href="#" class="icon brands fa-instagram"><span class="label">Instagram</span></a></li>
									<li><a href="#" class="icon brands fa-github"><span class="label">Github</span></a></li>
								</ul>
							</div>
						</div>
						<h5>Actions</h5>
						<div class="row">
							<div class="col-6 col-12-medium">
								<ul class="actions">
									<li><a href="#" class="button primary">Default</a></li>
									<li><a href="#" class="button">Default</a></li>
								</ul>
								<ul class="actions small">
									<li><a href="#" class="button primary small">Small</a></li>
									<li><a href="#" class="button small">Small</a></li>
								</ul>
								<ul class="actions stacked">
									<li><a href="#" class="button primary">Default</a></li>
									<li><a href="#" class="button">Default</a></li>
								</ul>
								<ul class="actions stacked">
									<li><a href="#" class="button primary small">Small</a></li>
									<li><a href="#" class="button small">Small</a></li>
								</ul>
							</div>
							<div class="col-6 col-12-medium">
								<ul class="actions stacked">
									<li><a href="#" class="button primary fit">Default</a></li>
									<li><a href="#" class="button fit">Default</a></li>
								</ul>
								<ul class="actions stacked">
									<li><a href="#" class="button primary small fit">Small</a></li>
									<li><a href="#" class="button small fit">Small</a></li>
								</ul>
							</div>
						</div>
					</section>

					<section>
						<h4>Table</h4>
						<h5>Default</h5>
						<div class="table-wrapper">
							<table>
								<thead>
									<tr>
										<th>Name</th>
										<th>Description</th>
										<th>Price</th>
									</tr>
								</thead>
								<tbody>
									<tr>
										<td>Item One</td>
										<td>Ante turpis integer aliquet porttitor.</td>
										<td>29.99</td>
									</tr>
									<tr>
										<td>Item Two</td>
										<td>Vis ac commodo adipiscing arcu aliquet.</td>
										<td>19.99</td>
									</tr>
									<tr>
										<td>Item Three</td>
										<td> Morbi faucibus arcu accumsan lorem.</td>
										<td>29.99</td>
									</tr>
									<tr>
										<td>Item Four</td>
										<td>Vitae integer tempus condimentum.</td>
										<td>19.99</td>
									</tr>
									<tr>
										<td>Item Five</td>
										<td>Ante turpis integer aliquet porttitor.</td>
										<td>29.99</td>
									</tr>
								</tbody>
								<tfoot>
									<tr>
										<td colspan="2"></td>
										<td>100.00</td>
									</tr>
								</tfoot>
							</table>
						</div>

						<h5>Alternate</h5>
						<div class="table-wrapper">
							<table class="alt">
								<thead>
									<tr>
										<th>Name</th>
										<th>Description</th>
										<th>Price</th>
									</tr>
								</thead>
								<tbody>
									<tr>
										<td>Item One</td>
										<td>Ante turpis integer aliquet porttitor.</td>
										<td>29.99</td>
									</tr>
									<tr>
										<td>Item Two</td>
										<td>Vis ac commodo adipiscing arcu aliquet.</td>
										<td>19.99</td>
									</tr>
									<tr>
										<td>Item Three</td>
										<td> Morbi faucibus arcu accumsan lorem.</td>
										<td>29.99</td>
									</tr>
									<tr>
										<td>Item Four</td>
										<td>Vitae integer tempus condimentum.</td>
										<td>19.99</td>
									</tr>
									<tr>
										<td>Item Five</td>
										<td>Ante turpis integer aliquet porttitor.</td>
										<td>29.99</td>
									</tr>
								</tbody>
								<tfoot>
									<tr>
										<td colspan="2"></td>
										<td>100.00</td>
									</tr>
								</tfoot>
							</table>
						</div>
					</section>

					<section>
						<h4>Buttons</h4>
						<ul class="actions">
							<li><a href="#" class="button primary">Primary</a></li>
							<li><a href="#" class="button">Default</a></li>
						</ul>
						<ul class="actions">
							<li><a href="#" class="button large">Large</a></li>
							<li><a href="#" class="button">Default</a></li>
							<li><a href="#" class="button small">Small</a></li>
						</ul>
						<ul class="actions fit">
							<li><a href="#" class="button fit">Fit</a></li>
							<li><a href="#" class="button primary fit">Fit</a></li>
							<li><a href="#" class="button fit">Fit</a></li>
						</ul>
						<ul class="actions fit small">
							<li><a href="#" class="button primary fit small">Fit + Small</a></li>
							<li><a href="#" class="button fit small">Fit + Small</a></li>
							<li><a href="#" class="button primary fit small">Fit + Small</a></li>
						</ul>
						<ul class="actions">
							<li><a href="#" class="button primary icon solid fa-download">Icon</a></li>
							<li><a href="#" class="button icon solid fa-download">Icon</a></li>
						</ul>
						<ul class="actions">
							<li><span class="button primary disabled">Disabled</span></li>
							<li><span class="button disabled">Disabled</span></li>
						</ul>
					</section>

					<section>
						<h4>Form</h4>
						<form method="post" action="#">
							<div class="row gtr-uniform gtr-50">
								<div class="col-6 col-12-xsmall">
									<input type="text" name="demo-name" id="demo-name" value="" placeholder="Name" />
								</div>
								<div class="col-6 col-12-xsmall">
									<input type="email" name="demo-email" id="demo-email" value="" placeholder="Email" />
								</div>
								<div class="col-12">
									<select name="demo-category" id="demo-category">
										<option value="">- Category -</option>
										<option value="1">Manufacturing</option>
										<option value="1">Shipping</option>
										<option value="1">Administration</option>
										<option value="1">Human Resources</option>
									</select>
								</div>
								<div class="col-4 col-12-small">
									<input type="radio" id="demo-priority-low" name="demo-priority" checked>
									<label for="demo-priority-low">Low</label>
								</div>
								<div class="col-4 col-12-small">
									<input type="radio" id="demo-priority-normal" name="demo-priority">
									<label for="demo-priority-normal">Normal</label>
								</div>
								<div class="col-4 col-12-small">
									<input type="radio" id="demo-priority-high" name="demo-priority">
									<label for="demo-priority-high">High</label>
								</div>
								<div class="col-6 col-12-small">
									<input type="checkbox" id="demo-copy" name="demo-copy">
									<label for="demo-copy">Email me a copy</label>
								</div>
								<div class="col-6 col-12-small">
									<input type="checkbox" id="demo-human" name="demo-human" checked>
									<label for="demo-human">Not a robot</label>
								</div>
								<div class="col-12">
									<textarea name="demo-message" id="demo-message" placeholder="Enter your message" rows="6"></textarea>
								</div>
								<div class="col-12">
									<ul class="actions">
										<li><input type="submit" value="Send Message" class="primary" /></li>
										<li><input type="reset" value="Reset" /></li>
									</ul>
								</div>
							</div>
						</form>
					</section>

					<section>
						<h4>Image</h4>
						<h5>Fit</h5>
						<div class="box alt">
							<div class="row gtr-uniform gtr-50">
								<div class="col-12"><span class="image fit"><img src="images/pic06.jpg" alt="" /></span></div>
								<div class="col-4"><span class="image fit"><img src="images/pic02.jpg" alt="" /></span></div>
								<div class="col-4"><span class="image fit"><img src="images/pic03.jpg" alt="" /></span></div>
								<div class="col-4"><span class="image fit"><img src="images/pic04.jpg" alt="" /></span></div>
								<div class="col-4"><span class="image fit"><img src="images/pic03.jpg" alt="" /></span></div>
								<div class="col-4"><span class="image fit"><img src="images/pic04.jpg" alt="" /></span></div>
								<div class="col-4"><span class="image fit"><img src="images/pic02.jpg" alt="" /></span></div>
								<div class="col-4"><span class="image fit"><img src="images/pic04.jpg" alt="" /></span></div>
								<div class="col-4"><span class="image fit"><img src="images/pic02.jpg" alt="" /></span></div>
								<div class="col-4"><span class="image fit"><img src="images/pic03.jpg" alt="" /></span></div>
							</div>
						</div>
						<h5>Left &amp; Right</h5>
						<p><span class="image left"><img src="images/pic05.jpg" alt="" /></span>Fringilla nisl. Donec accumsan interdum nisi, quis tincidunt felis sagittis eget. tempus euismod. Vestibulum ante ipsum primis in faucibus vestibulum. Blandit adipiscing eu felis iaculis volutpat ac adipiscing accumsan eu faucibus. Integer ac pellentesque praesent tincidunt felis sagittis eget. tempus euismod. Vestibulum ante ipsum primis in faucibus vestibulum. Blandit adipiscing eu felis iaculis volutpat ac adipiscing accumsan eu faucibus. Integer ac pellentesque praesent. Donec accumsan interdum nisi, quis tincidunt felis sagittis eget. tempus euismod. Vestibulum ante ipsum primis in faucibus vestibulum. Blandit adipiscing eu felis iaculis volutpat ac adipiscing accumsan eu faucibus. Integer ac pellentesque praesent tincidunt felis sagittis eget. tempus euismod. Vestibulum ante ipsum primis in faucibus vestibulum. Blandit adipiscing eu felis iaculis volutpat ac adipiscing accumsan eu faucibus. Integer ac pellentesque praesent. Blandit adipiscing eu felis iaculis volutpat ac adipiscing accumsan eu faucibus. Integer ac pellentesque praesent tincidunt felis sagittis eget. tempus euismod. Vestibulum ante ipsum primis in faucibus vestibulum. Blandit adipiscing eu felis iaculis volutpat ac adipiscing accumsan eu faucibus. Integer ac pellentesque praesent.</p>
						<p><span class="image right"><img src="images/pic05.jpg" alt="" /></span>Fringilla nisl. Donec accumsan interdum nisi, quis tincidunt felis sagittis eget. tempus euismod. Vestibulum ante ipsum primis in faucibus vestibulum. Blandit adipiscing eu felis iaculis volutpat ac adipiscing accumsan eu faucibus. Integer ac pellentesque praesent tincidunt felis sagittis eget. tempus euismod. Vestibulum ante ipsum primis in faucibus vestibulum. Blandit adipiscing eu felis iaculis volutpat ac adipiscing accumsan eu faucibus. Integer ac pellentesque praesent. Donec accumsan interdum nisi, quis tincidunt felis sagittis eget. tempus euismod. Vestibulum ante ipsum primis in faucibus vestibulum. Blandit adipiscing eu felis iaculis volutpat ac adipiscing accumsan eu faucibus. Integer ac pellentesque praesent tincidunt felis sagittis eget. tempus euismod. Vestibulum ante ipsum primis in faucibus vestibulum. Blandit adipiscing eu felis iaculis volutpat ac adipiscing accumsan eu faucibus. Integer ac pellentesque praesent. Blandit adipiscing eu felis iaculis volutpat ac adipiscing accumsan eu faucibus. Integer ac pellentesque praesent tincidunt felis sagittis eget. tempus euismod. Vestibulum ante ipsum primis in faucibus vestibulum. Blandit adipiscing eu felis iaculis volutpat ac adipiscing accumsan eu faucibus. Integer ac pellentesque praesent.</p>
					</section>

				</div>
			</section>
		-->

  <div class="mobile-container">
    <div class="header">
      <h1>crapboard</h1>
      <div class="subtitle">the internets clipboard</div>
    </div>
    
    <div class="content">
      <div class="editor-container">
        <div class="line-numbers" id="line-numbers"></div>
        <textarea id="paste-box" placeholder="type or paste something..."></textarea>
      </div>
    </div>
    
    <div class="turnstile-container turnstile-hidden" id="turnstile-container">
      <div class="challenge-message" id="challenge-message">
        Security check required - please complete the challenge below
      </div>
      <div id="turnstile-widget"></div>
    </div>
    
    <div class="bottom-row">
      <div class="buttons">
        <button id="dump-btn" title="ctrl+enter">dump</button>
        <button id="dive-btn" title="ctrl+l">dive</button>
      </div>
      <div class="counter" id="paste-counter">0</div>
    </div>
    
    <div class="legal-footer">
      <a href="/">home</a> · <a href="/about">about</a> · <a href="/legal">legal</a>
    </div>
  </div>
  
  <script>
    const pasteBox = document.getElementById('paste-box');
    const dumpBtn = document.getElementById('dump-btn');
    const diveBtn = document.getElementById('dive-btn');
    const pasteCounter = document.getElementById('paste-counter');
    const lineNumbers = document.getElementById('line-numbers');
    
    let isProcessing = false;
    let eventSource = null;
    let currentLineCount = 0;
    let turnstileToken = null;
    let pendingDump = false;
    let turnstileWidgetId = null;
    
    const csrfToken = document.querySelector('meta[name="csrf-token"]')?.getAttribute('content');
    const turnstileSiteKey = document.querySelector('meta[name="turnstile-site-key"]')?.getAttribute('content');
    
    console.log('Initialized with CSRF token:', csrfToken ? 'present' : 'missing');
    console.log('Initialized with Turnstile site key:', turnstileSiteKey, 'type:', typeof turnstileSiteKey);
    
    if (turnstileSiteKey) {
      document.getElementById('turnstile-widget').setAttribute('data-sitekey', turnstileSiteKey);
      console.log('Set data-sitekey attribute to:', turnstileSiteKey);
    }
    
    window.onTurnstileSuccess = function(token) {
      console.log('Turnstile challenge completed successfully, token:', token);
      turnstileToken = token;
      hideTurnstile();
      
      if (pendingDump) {
        console.log('Retrying pending dump with token:', token);
        pendingDump = false;
        isProcessing = false;
        dumpBtn.disabled = false;
        diveBtn.disabled = false;
        setTimeout(() => dump(), 0);
      }
    };
    
    window.onTurnstileError = function(error) {
      console.error('Turnstile error:', error);
      document.getElementById('challenge-message').textContent = 'Challenge failed. Please try again.';
      try {
        if (typeof turnstile !== 'undefined' && turnstile.reset && turnstileWidgetId != null) {
          turnstile.reset(turnstileWidgetId);
        } else {
          const widget = document.getElementById('turnstile-widget');
          if (widget) widget.innerHTML = '';
          showTurnstile('Challenge failed. Please try again.');
        }
      } catch (e) {
        console.warn('Failed to reset Turnstile widget, retrying render...', e);
        showTurnstile('Challenge failed. Please try again.');
      }
    };
    
    window.onTurnstileExpired = function() {
      console.log('Turnstile token expired');
      turnstileToken = null;
      document.getElementById('challenge-message').textContent = 'Security check expired. Please try again.';
      try {
        if (typeof turnstile !== 'undefined' && turnstile.reset && turnstileWidgetId != null) {
          turnstile.reset(turnstileWidgetId);
        } else {
          const widget = document.getElementById('turnstile-widget');
          if (widget) widget.innerHTML = '';
          showTurnstile('Security check expired. Please try again.');
        }
      } catch (e) {
        console.warn('Failed to reset Turnstile widget after expiry, retrying render...', e);
        showTurnstile('Security check expired. Please try again.');
      }
    };
    
    function showTurnstile(message = 'Security check required - please complete the challenge below') {
      console.log('Showing Turnstile challenge:', message);
      document.getElementById('challenge-message').textContent = message;
      document.getElementById('turnstile-container').classList.remove('turnstile-hidden');
      
      (function ensureTurnstileScript() {
        const existing = document.querySelector('script[data-turnstile]');
        if (!existing) {
          const s = document.createElement('script');
          s.src = 'https://challenges.cloudflare.com/turnstile/v0/api.js';
          s.setAttribute('data-turnstile', 'true');
          document.head.appendChild(s);
        }
      })();

      const widget = document.getElementById('turnstile-widget');
      widget.innerHTML = '';
      
      const renderOptions = {
        sitekey: turnstileSiteKey,
        action: 'dump',
        callback: function(token) {
          console.log('Turnstile SUCCESS callback triggered with token:', token);
          window.onTurnstileSuccess(token);
        },
        'error-callback': function(error) {
          console.log('Turnstile ERROR callback triggered:', error);
          if (String(error) && String(error).includes('300030')) {
            try {
              if (typeof turnstile !== 'undefined' && turnstile.reset && turnstileWidgetId != null) {
                turnstile.reset(turnstileWidgetId);
              }
            } catch {}
            document.getElementById('challenge-message').textContent = 'One more step: please complete the check again';
            return;
          }
          window.onTurnstileError(error);
        },
        'expired-callback': function() {
          console.log('Turnstile EXPIRED callback triggered');
          window.onTurnstileExpired();
        },
        theme: 'dark',
        size: 'normal'
      };
      
      const tryRender = (attempt = 0) => {
        const delay = Math.min(200 * (attempt + 1), 1000);
        if (typeof turnstile !== 'undefined' && turnstile.render && turnstileSiteKey) {
          try {
            console.log('Rendering Turnstile programmatically with site key:', turnstileSiteKey);
            turnstileWidgetId = turnstile.render('#turnstile-widget', renderOptions);
            console.log('Turnstile widget rendered with ID:', turnstileWidgetId);
          } catch (e) {
            console.error('Failed to render Turnstile widget:', e);
            setTimeout(() => tryRender(Math.min(attempt + 1, 10)), Math.min(500 * (attempt + 1), 2000));
          }
        } else {
          setTimeout(() => tryRender(Math.min(attempt + 1, 10)), delay);
        }
      };
      tryRender(0);
    }
    
    function hideTurnstile() {
      console.log('Hiding Turnstile challenge');
      document.getElementById('turnstile-container').classList.add('turnstile-hidden');
    }
    
    function updateLineNumbers() {
      const style = window.getComputedStyle(pasteBox);
      const lineHeight = parseFloat(style.lineHeight) || 24;
      const paddingTop = parseFloat(style.paddingTop) || 0;
      const paddingBottom = parseFloat(style.paddingBottom) || 0;
      const contentHeight = pasteBox.scrollHeight - paddingTop - paddingBottom;
      const newLineCount = Math.max(1, Math.round(contentHeight / lineHeight));

      if (newLineCount !== currentLineCount) {
        currentLineCount = newLineCount;
        const numbers = [];
        for (let i = 1; i <= currentLineCount; i++) {
          numbers.push(i);
        }
        lineNumbers.textContent = numbers.join('\n');
      }
    }
    
    function syncScroll() {
      lineNumbers.scrollTop = pasteBox.scrollTop;
    }
    
    updateLineNumbers();
    
    pasteBox.addEventListener('input', updateLineNumbers);
    pasteBox.addEventListener('paste', () => {
      setTimeout(updateLineNumbers, 0);
    });
    
    pasteBox.addEventListener('scroll', () => {
      requestAnimationFrame(syncScroll);
    });
    window.addEventListener('resize', updateLineNumbers);
    
    async function updateCount() {
      try {
        const response = await fetch('/api/count');
        const data = await response.json();
        pasteCounter.textContent = data.count;
      } catch (error) {
        console.error('Count failed:', error);
      }
    }
    
    function setupSSE() {
      if (eventSource) {
        eventSource.close();
      }
      
      eventSource = new EventSource('/api/stream');
      
      eventSource.onmessage = (event) => {
        try {
          const data = JSON.parse(event.data);
          pasteCounter.textContent = data.count;
        } catch (error) {
          console.error('SSE parse error:', error);
        }
      };
      
      eventSource.onerror = (error) => {
        console.error('SSE error:', error);
        setTimeout(setupSSE, 5000);
      };
    }
    
    async function dump() {
      const text = pasteBox.value;
      if (!text.trim() || isProcessing) return;
      
      isProcessing = true;
      dumpBtn.disabled = true;
      diveBtn.disabled = true;
      const originalText = 'dump';
      dumpBtn.textContent = 'dumping...';
      
      try {
        const headers = { 'Content-Type': 'application/json' };
        if (csrfToken) {
          headers['X-CSRF-Token'] = csrfToken;
          console.log('Added CSRF token to request');
        }
        if (turnstileToken) {
          headers['CF-Turnstile-Response'] = turnstileToken;
          console.log('Added Turnstile token to request:', turnstileToken.substring(0, 20) + '...');
        } else {
          console.log('No Turnstile token available');
        }
        
        console.log('Making dump request with headers:', Object.keys(headers));
        const response = await fetch('/api/dump', {
          method: 'POST',
          headers,
          body: JSON.stringify({ text })
        });
        
        console.log('Dump response status:', response.status);

        if (response.status === 403) {
          let error = null;
          try {
            const ct = response.headers.get('content-type') || '';
            console.log('Response Content-Type:', ct);
            if (ct.includes('application/json')) {
              error = await response.json();
              console.log('Parsed JSON:', error);
            }
          } catch (e) {
            console.error('Failed to parse JSON:', e);
          }
          console.log('403 error response:', error);
          console.log('Checking for turnstile:', error?.challenge, error?.challenge === 'turnstile');
          if (error && error.challenge === 'turnstile') {
            pendingDump = true;
            showTurnstile(error.reason || error.message || 'Please complete the security check to continue');

            dumpBtn.textContent = 'dumping...';
            return;
          } else {
            let msg = 'Access denied';

            if (error && error.error) {
              msg += ': ' + error.error;
            }
            alert(msg);
          }
        } else if (response.status === 429) {
          let msg = 'rate limit exceeded. try again later.';
          try {
            const ct = response.headers.get('content-type') || '';
            if (ct.includes('application/json')) {
              const e = await response.json();
              if (e && e.error) msg = e.error;
            } else {
              const t = await response.text();
              if (t) msg = 'rate limited: ' + t.slice(0, 200);
            }
          } catch {}
          alert(msg);
        } 
        
        if (response.ok) {
          pasteBox.value = '';
          updateLineNumbers();
            turnstileToken = null;
        } else {
          let msg = 'dump failed';
          try {
            const ct = response.headers.get('content-type') || '';
            if (ct.includes('application/json')) {
              const e = await response.json();
              if (e && (e.error || e.message)) msg = e.error || e.message;
            } else {
              const t = await response.text();
              if (t) msg = t.slice(0, 200);
            }
          } catch {}
          alert(msg);
        }
      } catch (error) {
        console.error('Dump failed:', error);
        alert('dump failed - check connection');
      } finally {
        if (!pendingDump) {
          isProcessing = false;
          dumpBtn.disabled = false;
          diveBtn.disabled = false;
          dumpBtn.textContent = originalText;
        }
      }
    }
    
    async function dive() {
      if (isProcessing) return;
      
      isProcessing = true;
      dumpBtn.disabled = true;
      diveBtn.disabled = true;
      const originalText = diveBtn.textContent;
      diveBtn.textContent = 'diving...';
      
      try {
        const response = await fetch('/api/dive');
        const data = await response.json();
        
        if (response.ok) {
          pasteBox.value = data.text || '';
          updateLineNumbers();
        } else {
          alert(data.error || 'dive failed');
        }
      } catch (error) {
        console.error('Dive failed:', error);
        alert('dive failed - check connection');
      } finally {
        isProcessing = false;
        dumpBtn.disabled = false;
        diveBtn.disabled = false;
        diveBtn.textContent = originalText;
      }
    }

    let touchStartX = 0;
    let touchStartY = 0;
    let isSwiping = false;
    
    pasteBox.addEventListener('touchstart', (e) => {
      touchStartX = e.touches[0].clientX;
      touchStartY = e.touches[0].clientY;
      isSwiping = true;
    }, { passive: true });
    
    pasteBox.addEventListener('touchmove', (e) => {
      if (!isSwiping) return;
      
      const touchEndX = e.touches[0].clientX;
      const touchEndY = e.touches[0].clientY;
      const deltaX = touchEndX - touchStartX;
      const deltaY = touchEndY - touchStartY;

      if (Math.abs(deltaY) > Math.abs(deltaX)) {
        isSwiping = false;
      }
    }, { passive: true });
    
    pasteBox.addEventListener('touchend', (e) => {
      if (!isSwiping || isProcessing) return;
      
      const touchEndX = e.changedTouches[0].clientX;
      const touchEndY = e.changedTouches[0].clientY;
      const deltaX = touchEndX - touchStartX;
      const deltaY = touchEndY - touchStartY;

      if (Math.abs(deltaX) > 50 && Math.abs(deltaX) > Math.abs(deltaY)) {

        dive();
      }
      
      isSwiping = false;
    }, { passive: true });
    
    dumpBtn.addEventListener('click', dump);
    diveBtn.addEventListener('click', dive);
    
    document.addEventListener('keydown', (e) => {
      if (e.ctrlKey && e.key === 'Enter') {
        e.preventDefault();
        dump();
      } else if (e.ctrlKey && e.key === 'l') {
        e.preventDefault();
        dive();
      }
    });
    
    updateCount();
    
    setupSSE();
  </script>
<script defer src="https://static.cloudflareinsights.com/beacon.min.js/vcd15cbe7772f49c399c6a5babf22c1241717689176015" integrity="sha512-ZpsOmlRQV6y907TI0dKBHq9Md29nnaEIPlkf84rnaERnq6zvWvPUqr2ft8M1aS28oN72PdrCzSjY4U6VaAw1EQ==" data-cf-beacon='{"rayId":"983737fc9cd14014","version":"2025.9.1","r":1,"token":"b7bdfa89488e492a95af4fb2d839d316","serverTiming":{"name":{"cfExtPri":true,"cfEdge":true,"cfOrigin":true,"cfL4":true,"cfSpeedBrain":true,"cfCacheStatus":true}}}' crossorigin="anonymous"></script>
</body>
</html>